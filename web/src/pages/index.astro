---
import Layout from '../components/Layout.astro';
import FeatureCard from '../components/FeatureCard.astro';
import TerminalCode from '../components/TerminalCode.astro';

const base = import.meta.env.BASE_URL;

const features = [
  {
    icon: "üåê",
    title: "All HTTP Methods",
    description: "GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS ‚Äî full HTTP support with custom headers and request bodies.",
    glowColor: "cyan" as const,
  },
  {
    icon: "üîê",
    title: "Smart Azure Auth",
    description: "Automatic OAuth scope detection for 20+ Azure services ‚Äî Management API, Storage, Key Vault, Graph, and more.",
    glowColor: "violet" as const,
  },
  {
    icon: "üìÑ",
    title: "Auto Pagination",
    description: "Follows nextLink, @odata.nextLink, and Link headers automatically. Collect all pages with a single command.",
    glowColor: "emerald" as const,
  },
  {
    icon: "üîÑ",
    title: "Retry Logic",
    description: "Exponential backoff with configurable retries. Handles transient failures and throttling gracefully.",
    glowColor: "cyan" as const,
  },
  {
    icon: "üé®",
    title: "Response Formatting",
    description: "Pretty-printed JSON, configurable size limits, and verbose mode with full request/response details.",
    glowColor: "violet" as const,
  },
  {
    icon: "üõ°Ô∏è",
    title: "Token Security",
    description: "Automatic token redaction in verbose output. Your credentials are never exposed in logs or terminal history.",
    glowColor: "emerald" as const,
  },
];
---

<Layout title="Home" description="Azure REST API Client ‚Äî Execute authenticated REST calls to any Azure service. Smart auth, auto pagination, retry logic.">

  <!-- Hero Section -->
  <section class="hero" aria-labelledby="hero-heading">
    <div class="hero-container">
      <div class="hero-content">
        <a
          href="https://github.com/jongio"
          target="_blank"
          rel="noopener noreferrer"
          class="hero-badge animate-fade-up"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 2L9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2z"/>
          </svg>
          By Jon Gallant
        </a>

        <h1 id="hero-heading" class="hero-title animate-fade-up" style="animation-delay: 0.1s">
          <span class="text-gradient-animated">Authenticated Azure REST Calls</span>
        </h1>

        <p class="hero-description animate-fade-up" style="animation-delay: 0.2s">
          Smart scope detection, automatic pagination, and retry logic ‚Äî zero token management.
        </p>

        <div class="hero-command animate-fade-up" style="animation-delay: 0.3s">
          <span class="hero-cmd-prompt" aria-hidden="true">‚ùØ</span>
          <span class="hero-cmd-text">azd rest</span>
        </div>

        <div class="hero-actions animate-fade-up" style="animation-delay: 0.4s">
          <a href={`${base}getting-started/`} class="btn-primary">
            Get Started
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
          <a href="https://github.com/jongio/azd-rest" class="btn-secondary" target="_blank" rel="noopener">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.164 6.839 9.49.5.09.682-.218.682-.484 0-.237-.009-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .269.18.579.688.481C19.138 20.161 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
            </svg>
            View on GitHub
          </a>
        </div>

        <p class="hero-social-proof animate-fade-up" style="animation-delay: 0.5s">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="check-icon">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Open source ‚Ä¢ Works with Azure Developer CLI
        </p>
      </div>
    </div>
  </section>

  <!-- Quick Install Section -->
  <section class="install" aria-labelledby="install-heading">
    <div class="install-container">
      <div class="install-card">
        <div class="install-glow" aria-hidden="true"></div>
        <div class="install-content">
          <div class="install-header">
            <h2 id="install-heading" class="install-title">
              Get Started in <span class="text-gradient">30 Seconds</span>
            </h2>
            <p class="install-description">
              Install the extension and start making authenticated Azure REST calls
            </p>
          </div>

          <div class="install-steps">
            <div class="install-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>Add Source</h4>
                <TerminalCode code="azd extension source add -n jongio -t url -l https://jongio.github.io/azd-extensions/registry.json" />
              </div>
            </div>

            <div class="install-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>Install</h4>
                <TerminalCode code="azd extension install jongio.azd.rest" />
              </div>
            </div>

            <div class="install-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>Make a Request</h4>
                <TerminalCode code="azd rest get https://management.azure.com/subscriptions?api-version=2022-12-01" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features" aria-labelledby="features-heading">
    <div class="features-container">
      <div class="features-header">
        <h2 id="features-heading" class="features-title">
          Everything You Need for <span class="text-gradient">Azure REST Calls</span>
        </h2>
        <p class="features-description">
          Smart authentication, pagination, retries, and formatting work together so you can focus on the API ‚Äî not the plumbing.
        </p>
      </div>
      <div class="features-grid" role="list">
        {features.map((feature) => (
          <FeatureCard
            icon={feature.icon}
            title={feature.title}
            description={feature.description}
            glowColor={feature.glowColor}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Terminal Demo Section -->
  <section class="demo" aria-labelledby="demo-heading">
    <div class="demo-container">
      <div class="demo-header">
        <h2 id="demo-heading" class="demo-title">
          See It in <span class="text-gradient">Action</span>
        </h2>
        <p class="demo-description">
          A simple GET request with automatic authentication and pretty-printed JSON output
        </p>
      </div>
      <div class="demo-terminal">
        <div class="terminal-chrome">
          <div class="terminal-dots" aria-hidden="true">
            <span class="dot dot-red"></span>
            <span class="dot dot-yellow"></span>
            <span class="dot dot-green"></span>
          </div>
          <span class="terminal-title">Terminal</span>
        </div>
        <div class="terminal-body">
          <div class="terminal-line">
            <span class="t-prompt">‚ùØ</span>
            <span class="t-cmd">azd rest get</span>
            <span class="t-url">https://management.azure.com/subscriptions?api-version=2022-12-01</span>
          </div>
          <div class="terminal-output">
            <pre><code>{`{
  "value": [
    {
      "id": "/subscriptions/a1b2c3d4-...",
      "subscriptionId": "a1b2c3d4-...",
      "displayName": "My Azure Subscription",
      "state": "Enabled",
      "tenantId": "e5f6a7b8-..."
    }
  ]
}`}</code></pre>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Hero Section */
  .hero {
    position: relative;
    padding: 4rem 1.5rem 6rem;
    background:
      radial-gradient(ellipse 80% 50% at 50% -20%, rgba(6, 182, 212, 0.15), transparent),
      radial-gradient(ellipse 60% 40% at 80% 50%, rgba(139, 92, 246, 0.1), transparent);
  }

  @media (min-width: 768px) {
    .hero {
      padding: 6rem 2rem 8rem;
    }
  }

  .hero-container {
    max-width: 56rem;
    margin: 0 auto;
  }

  .hero-content {
    text-align: center;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    margin-bottom: 1.5rem;
    border-radius: 9999px;
    border: 1px solid rgba(6, 182, 212, 0.3);
    background: rgba(6, 182, 212, 0.1);
    color: var(--color-primary);
    font-size: 0.875rem;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .hero-badge:hover {
    border-color: rgba(6, 182, 212, 0.5);
    background: rgba(6, 182, 212, 0.2);
    text-decoration: none;
  }

  .hero-title {
    font-size: 2.5rem;
    font-weight: 800;
    line-height: 1.1;
    letter-spacing: -0.02em;
    margin-bottom: 1.5rem;
  }

  @media (min-width: 640px) {
    .hero-title { font-size: 3.5rem; }
  }

  @media (min-width: 1024px) {
    .hero-title { font-size: 4rem; }
  }

  .text-gradient-animated {
    background: linear-gradient(90deg, var(--color-glow-cyan), var(--color-glow-violet), var(--color-glow-emerald), var(--color-glow-cyan));
    background-size: 300% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradient-shift 6s ease infinite;
  }

  .text-gradient {
    background: linear-gradient(135deg, var(--color-glow-cyan), var(--color-glow-violet));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .hero-description {
    max-width: 36rem;
    margin: 0 auto 1.5rem;
    font-size: 1.125rem;
    line-height: 1.7;
    color: var(--color-muted-foreground);
  }

  @media (min-width: 768px) {
    .hero-description { font-size: 1.25rem; }
  }

  .hero-command {
    max-width: 32rem;
    margin: 0 auto 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 1rem 2rem;
    border-radius: 1rem;
    background: rgba(15, 23, 42, 0.6);
    border: 1px solid rgba(6, 182, 212, 0.3);
    box-shadow: 0 0 40px rgba(6, 182, 212, 0.15), 0 0 80px rgba(139, 92, 246, 0.1);
  }

  .hero-cmd-prompt {
    font-family: var(--font-mono);
    font-size: 2rem;
    color: var(--color-glow-cyan);
    line-height: 1;
  }

  .hero-cmd-text {
    font-family: var(--font-mono);
    font-size: 2.5rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    color: var(--color-foreground);
    line-height: 1;
  }

  @media (min-width: 640px) {
    .hero-cmd-prompt { font-size: 2.5rem; }
    .hero-cmd-text { font-size: 3.5rem; }
    .hero-command { padding: 1.25rem 2.5rem; }
  }

  @media (min-width: 1024px) {
    .hero-cmd-prompt { font-size: 3rem; }
    .hero-cmd-text { font-size: 4rem; }
    .hero-command { max-width: 36rem; padding: 1.5rem 3rem; }
  }

  .hero-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  @media (min-width: 640px) {
    .hero-actions { flex-direction: row; }
  }

  .hero-social-proof {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--color-muted-foreground);
    margin: 0;
  }

  .check-icon {
    color: var(--color-glow-emerald);
  }

  /* Install Section */
  .install {
    padding: 0 1.5rem 5rem;
  }

  @media (min-width: 768px) {
    .install { padding: 0 2rem 6rem; }
  }

  .install-container {
    max-width: 56rem;
    margin: 0 auto;
  }

  .install-card {
    position: relative;
    overflow: hidden;
    border-radius: 1.5rem;
    padding: 2rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-default);
  }

  @media (min-width: 640px) {
    .install-card { padding: 3rem; }
  }

  .install-glow {
    position: absolute;
    top: -5rem;
    right: -5rem;
    width: 15rem;
    height: 15rem;
    background: var(--color-glow-violet);
    border-radius: 50%;
    opacity: 0.1;
    filter: blur(80px);
    pointer-events: none;
  }

  .install-content {
    position: relative;
    z-index: 1;
  }

  .install-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .install-title {
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  @media (min-width: 640px) {
    .install-title { font-size: 2rem; }
  }

  .install-description {
    color: var(--color-text-secondary);
    margin: 0;
  }

  .install-steps {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .install-step {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
  }

  .step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    flex-shrink: 0;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
    color: white;
    font-size: 0.875rem;
    font-weight: 700;
  }

  .step-content {
    flex: 1;
    min-width: 0;
  }

  .step-content h4 {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--color-text-primary);
  }

  /* Features Section */
  .features {
    padding: 5rem 1.5rem;
  }

  @media (min-width: 768px) {
    .features { padding: 6rem 2rem; }
  }

  .features-container {
    max-width: 72rem;
    margin: 0 auto;
  }

  .features-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .features-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }

  @media (min-width: 768px) {
    .features-title { font-size: 2.5rem; }
  }

  .features-description {
    max-width: 36rem;
    margin: 0 auto;
    font-size: 1.125rem;
    color: var(--color-text-secondary);
  }

  .features-grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: 1fr;
  }

  @media (min-width: 640px) {
    .features-grid { grid-template-columns: repeat(2, 1fr); }
  }

  @media (min-width: 1024px) {
    .features-grid { grid-template-columns: repeat(3, 1fr); }
  }

  /* Terminal Demo Section */
  .demo {
    padding: 0 1.5rem 5rem;
  }

  @media (min-width: 768px) {
    .demo { padding: 0 2rem 6rem; }
  }

  .demo-container {
    max-width: 56rem;
    margin: 0 auto;
  }

  .demo-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .demo-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  @media (min-width: 768px) {
    .demo-title { font-size: 2.5rem; }
  }

  .demo-description {
    color: var(--color-text-secondary);
    font-size: 1.125rem;
    margin: 0;
  }

  .demo-terminal {
    border-radius: 1rem;
    overflow: hidden;
    border: 1px solid var(--color-border-default);
    box-shadow: var(--shadow-xl);
  }

  .terminal-chrome {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: var(--code-header-bg);
    border-bottom: 1px solid var(--code-header-border);
  }

  .terminal-dots {
    display: flex;
    gap: 0.375rem;
  }

  .dot {
    width: 0.75rem;
    height: 0.75rem;
    border-radius: 50%;
  }

  .dot-red { background: #ef4444; }
  .dot-yellow { background: #f59e0b; }
  .dot-green { background: #10b981; }

  .terminal-title {
    font-size: 0.75rem;
    color: var(--code-filename-color);
    font-family: var(--font-mono);
  }

  .terminal-body {
    padding: 1.25rem 1.5rem;
    background: var(--code-block-bg);
    font-family: var(--font-mono);
    font-size: 0.875rem;
    line-height: 1.6;
    overflow-x: auto;
  }

  .terminal-line {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-bottom: 1rem;
  }

  .t-prompt {
    color: var(--color-glow-cyan);
    flex-shrink: 0;
  }

  .t-cmd {
    color: var(--color-primary);
    font-weight: 600;
    flex-shrink: 0;
  }

  .t-url {
    color: var(--color-muted-foreground);
    word-break: break-all;
  }

  .terminal-output pre {
    margin: 0;
  }

  .terminal-output code {
    color: var(--color-foreground);
    background: none;
    padding: 0;
    font-size: 0.875rem;
  }
</style>
